[gd_scene load_steps=27 format=4 uid="uid://vofh034wf51r"]

[ext_resource type="TileSet" uid="uid://07fq3rspk8ia" path="res://scenes/tileset.tres" id="1_guoos"]
[ext_resource type="PackedScene" uid="uid://iu2q66clupc6" path="res://scenes/game_elements/characters/player/player.tscn" id="2_rnsyy"]
[ext_resource type="Script" uid="uid://c68oh8dtr21ti" path="res://scenes/game_logic/sequence_puzzle.gd" id="3_i2xe8"]
[ext_resource type="PackedScene" uid="uid://b8sok264erfoc" path="res://scenes/game_elements/props/sequence_puzzle_object/sequence_puzzle_object.tscn" id="4_u8jam"]
[ext_resource type="AudioStream" uid="uid://cg57q82pb243w" path="res://assets/third_party/xylophone-sampler-pack/xylophone-c3.ogg" id="5_kr1mt"]
[ext_resource type="Texture2D" uid="uid://b6eoy8un7xoqp" path="res://assets/third_party/tiny-swords/UI/Buttons/Button_Red.png" id="6_mu4di"]
[ext_resource type="AudioStream" uid="uid://b83x8h0ob5mpq" path="res://assets/third_party/xylophone-sampler-pack/xylophone-d3.ogg" id="6_vfsii"]
[ext_resource type="AudioStream" uid="uid://cmtiwg2cylmts" path="res://assets/third_party/xylophone-sampler-pack/xylophone-e3.ogg" id="7_c27dh"]
[ext_resource type="Texture2D" uid="uid://ddofc4v1akfpw" path="res://assets/third_party/tiny-swords/UI/Buttons/Button_Red_Pressed.png" id="7_obphs"]
[ext_resource type="AudioStream" uid="uid://8k1hyi4gjae4" path="res://assets/third_party/xylophone-sampler-pack/xylophone-f3.ogg" id="8_36xq4"]
[ext_resource type="Texture2D" uid="uid://bq2s56qf1ago1" path="res://assets/third_party/tiny-swords/UI/Buttons/Button_Hover.png" id="8_osqhh"]
[ext_resource type="AudioStream" uid="uid://6oahn2ucxxjv" path="res://assets/third_party/xylophone-sampler-pack/xylophone-g3.ogg" id="9_dch67"]
[ext_resource type="AudioStream" uid="uid://bdboi4ndapqec" path="res://assets/third_party/xylophone-sampler-pack/xylophone-a3.ogg" id="10_c28ma"]
[ext_resource type="PackedScene" uid="uid://be4o3ythda4cu" path="res://scenes/game_elements/props/sequence_puzzle_hint_sign/sequence_puzzle_hint_sign.tscn" id="11_hqbde"]
[ext_resource type="SpriteFrames" uid="uid://bhcgkxhy4cqf4" path="res://scenes/quests/story_quests/template/3_template_sequence_puzzle/template_sign_2.tres" id="12_da3b5"]
[ext_resource type="Script" uid="uid://ccc78coj2b1li" path="res://scenes/game_logic/sequence_puzzle_step.gd" id="13_qq8lk"]
[ext_resource type="PackedScene" uid="uid://fuhl3l6gxq5k" path="res://scenes/game_elements/props/collectible_item/collectible_item.tscn" id="14_gi6a4"]
[ext_resource type="Script" uid="uid://bgmwplmj3bfls" path="res://scenes/globals/game_state/inventory/inventory_item.gd" id="15_h7l4i"]
[ext_resource type="PackedScene" uid="uid://covsdqqsd6rsy" path="res://scenes/game_elements/props/sign/sign.tscn" id="17_ahdq8"]
[ext_resource type="PackedScene" uid="uid://cfcgrfvtn04yp" path="res://scenes/ui_elements/hud/hud.tscn" id="18_8nqux"]
[ext_resource type="Script" uid="uid://x1mxt6bmei2o" path="res://scenes/ui_elements/cinematic/cinematic.gd" id="19_mbj8h"]
[ext_resource type="Resource" uid="uid://cgfnlhqrcivot" path="res://scenes/quests/story_quests/grace/3_grace_sequence_puzzle/grace_sequence_puzzle.dialogue" id="23_3yqqj"]
[ext_resource type="Texture2D" uid="uid://boeaxk35yjpwl" path="res://scenes/game_elements/props/door/components/door_closed.png" id="23_ubfk3"]
[ext_resource type="Texture2D" uid="uid://b65dg7i548oip" path="res://scenes/game_elements/props/decoration/books/components/Books_1.png" id="24_3yqqj"]
[ext_resource type="Texture2D" uid="uid://cyvi71ryavsld" path="res://scenes/game_elements/props/decoration/books/components/Books_2.png" id="25_b77x0"]

[sub_resource type="Resource" id="Resource_u8qfb"]
script = ExtResource("15_h7l4i")
name = ""
type = 2
metadata/_custom_type_script = "uid://bgmwplmj3bfls"

[node name="SequencePuzzleTemplate" type="Node2D"]

[node name="TileMapLayers" type="Node2D" parent="."]

[node name="Grass" type="TileMapLayer" parent="TileMapLayers"]
tile_map_data = PackedByteArray("AAANAAcADgAAAAAAAAANAAYADgAAAAAAAAANAAUADgAAAAAAAAANAAQADgAAAAAAAAANAAMADgAAAAAAAAANAAIADgAAAAAAAAANAAEADgAAAAAAAAAMAAcADgAAAAAAAAAMAAYADgAAAAAAAAAMAAUADgAAAAAAAAAMAAQADgAAAAAAAAAMAAMADgAAAAAAAAAMAAIADgAAAAAAAAAMAAEADgAAAAAAAAALAAcADgAAAAAAAAALAAYADgAAAAAAAAALAAUADgAAAAAAAAALAAQADgAAAAAAAAALAAMADgAAAAAAAAALAAIADgAAAAAAAAALAAEADgAAAAAAAAAKAAcADgAAAAAAAAAKAAYADgAAAAAAAAAKAAUADgAAAAAAAAAKAAQADgAAAAAAAAAKAAMADgAAAAAAAAAKAAIADgAAAAAAAAAJAAcADgAAAAAAAAAJAAYADgAAAAAAAAAJAAUADgAAAAAAAAAJAAQADgAAAAAAAAAJAAMADgAAAAAAAAAJAAIADgAAAAAAAAAIAAcADgAAAAAAAAAIAAYADgAAAAAAAAAIAAUADgAAAAAAAAAIAAQADgAAAAAAAAAIAAMADgAAAAAAAAAIAAIADgAAAAAAAAAHAAcADgAAAAAAAAAHAAYADgAAAAAAAAAHAAUADgAAAAAAAAAHAAQADgAAAAAAAAAHAAMADgAAAAAAAAAHAAIADgAAAAAAAAAGAAcADgAAAAAAAAAGAAYADgAAAAAAAAAGAAUADgAAAAAAAAAGAAQADgAAAAAAAAAGAAMADgAAAAAAAAAGAAIADgAAAAAAAAAFAAcADgAAAAAAAAAFAAYADgAAAAAAAAAFAAUADgAAAAAAAAAFAAQADgAAAAAAAAAFAAMADgAAAAAAAAAFAAIADgAAAAAAAAAFAAEADgAAAAAAAAAEAAcADgAAAAAAAAAEAAYADgAAAAAAAAAEAAQADgAAAAAAAAAEAAMADgAAAAAAAAAEAAIADgAAAAAAAAAEAAEADgAAAAAAAAADAAQADgAAAAAAAAADAAMADgAAAAAAAAADAAIADgAAAAAAAAADAAEADgAAAAAAAAACAAMADgAAAAAAAAACAAIADgAAAAAAAAACAAEADgAAAAAAAAABAAMADgAAAAAAAAABAAIADgAAAAAAAAABAAEADgAAAAAAAAACAAQADgAAAAAAAAABAAQADgAAAAAAAAAAAAQABAABAAIAAAAGAAAABAABAAUAAAAHAAAABAABAAUAAAAFAAAABAABAAUAAAAIAAAABAABAAUAAAAJAAAABAABAAUAAAALAAAABAABAAUAAAAMAAAABAABAAUAAAAKAAAABAABAAUAAAANAAAABAABAAUAAAAEAAAABAABAAUAAAADAAAABAABAAUAAAACAAAABAABAAUAAAAAAAgABAABAAEAAAABAAgABAABAAEAAAACAAgABAABAAEAAAADAAgABAABAAEAAAAEAAgABAABAAEAAAAFAAgABAABAAEAAAAGAAgABAABAAEAAAAHAAgABAABAAEAAAAIAAgABAABAAEAAAAJAAgABAABAAEAAAAKAAgABAABAAEAAAAMAAgABAABAAEAAAALAAgABAABAAEAAAANAAgABAABAAEAAAAOAAgABAABAAEAAAAOAAcABAACAAIAAAAOAAYABAACAAIAAAAOAAUABAAAAAQAAAAOAAQADgAAAAAAAAAOAAMABAABAAUAAAAOAAIABAABAAIAAAAOAAEABAACAAIAAAAOAAAABAACAAIAAAAAAAUABAABAAIAAAABAAUADgAAAAAAAAACAAUADgAAAAAAAAADAAUADgAAAAAAAAAEAAUADgAAAAAAAAADAAYADgAAAAAAAAACAAYADgAAAAAAAAABAAYADgAAAAAAAAAAAAYABAABAAUAAAAAAAcADgAAAAAAAAABAAcADgAAAAAAAAACAAcADgAAAAAAAAADAAcADgAAAAAAAAAGAAEADgAAAAAAAAAHAAEADgAAAAAAAAAIAAEADgAAAAAAAAAJAAEADgAAAAAAAAAKAAEADgAAAAAAAAAPAAkABAABAAUAAAAPAAgABAABAAEAAAAPAAcABAAAAAEAAAAPAAYABAAAAAEAAAAPAAUABAAAAAEAAAAPAAMABAABAAUAAAAPAAIABAAAAAEAAAAPAAEABAAAAAEAAAAPAAAABAAAAAEAAAAPAP//BAAAAAEAAAAOAAkABAABAAUAAAAOAP//BAACAAIAAAANAAkABAABAAUAAAANAP//BAACAAIAAAAMAAkABAABAAUAAAAMAP//BAACAAIAAAALAAkABAABAAUAAAALAP//BAACAAIAAAAKAAkABAABAAUAAAAKAP//BAACAAIAAAAJAAkABAABAAUAAAAJAP//BAACAAIAAAAIAAkABAABAAUAAAAIAP//BAACAAIAAAAHAAkABAABAAUAAAAHAP//BAACAAIAAAAGAAkABAABAAUAAAAGAP//BAACAAIAAAAFAAkABAABAAUAAAAFAP//BAACAAIAAAAEAAkABAABAAUAAAAEAP//BAACAAIAAAADAAkABAABAAUAAAADAP//BAACAAIAAAACAAkABAABAAUAAAACAP//BAACAAIAAAABAAkABAABAAUAAAABAP//BAACAAIAAAAAAAkABAABAAUAAAAAAP//BAACAAIAAAD//wkABAABAAUAAAD//wgABAABAAEAAAD//wYABAABAAUAAAD//wUABAAAAAEAAAD//wQABAAAAAEAAAD//wMABAAAAAEAAAD//wIABAAAAAEAAAD//wEABAAAAAEAAAD//wAABAAAAAEAAAD/////BAAAAAEAAAABAAAABAABAAUAAAAAAAAABAABAAIAAAAAAAMABAABAAIAAAAAAAIABAABAAIAAAAAAAEABAABAAIAAAA=")
tile_set = ExtResource("1_guoos")

[node name="Sand" type="TileMapLayer" parent="TileMapLayers"]
tile_map_data = PackedByteArray("AAD//wcADwAAAAAAAAAAAAcADwAAAAAAAAABAAcADwAAAAAAAAACAAcADwAAAAAAAAADAAcADwAAAAAAAAADAAYADwAAAAAAAAADAAUADwAAAAAAAAAEAAUADwAAAAAAAAAFAAUADwAAAAAAAAAGAAUADwAAAAAAAAAHAAUADwAAAAAAAAAIAAUADwAAAAAAAAAJAAUADwAAAAAAAAAKAAUADwAAAAAAAAALAAUADwAAAAAAAAALAAQADwAAAAAAAAAMAAQADwAAAAAAAAANAAQADwAAAAAAAAAOAAQADwAAAAAAAAAPAAQADwAAAAAAAAADAAQADwAAAAAAAAADAAMADwAAAAAAAAACAAMADwAAAAAAAAACAAIADwAAAAAAAAADAAIADwAAAAAAAAAFAAQADwAAAAAAAAAFAAMADwAAAAAAAAAGAAMADwAAAAAAAAAJAAQADwAAAAAAAAAJAAMADwAAAAAAAAAJAAIADwAAAAAAAAA=")
tile_set = ExtResource("1_guoos")

[node name="OnTheGround" type="Node2D" parent="."]
y_sort_enabled = true

[node name="Player" parent="OnTheGround" instance=ExtResource("2_rnsyy")]
position = Vector2(599, 355)
scale = Vector2(4, 4)

[node name="SequencePuzzle" type="Node2D" parent="OnTheGround" node_paths=PackedStringArray("steps")]
y_sort_enabled = true
position = Vector2(-1, 0)
script = ExtResource("3_i2xe8")
steps = [NodePath("Steps/SequencePuzzleStep1"), NodePath("Steps/SequencePuzzleStep2")]
metadata/_custom_type_script = "uid://c68oh8dtr21ti"

[node name="Objects" type="Node2D" parent="OnTheGround/SequencePuzzle"]
y_sort_enabled = true
position = Vector2(356, 453)

[node name="Blue" parent="OnTheGround/SequencePuzzle/Objects" instance=ExtResource("4_u8jam")]
modulate = Color(0, 0.4, 0.6, 1)
position = Vector2(-166, -274)
collision_layer = 2
audio_stream = ExtResource("5_kr1mt")

[node name="TextureButton" type="TextureButton" parent="OnTheGround/SequencePuzzle/Objects/Blue"]
offset_left = -31.0
offset_top = -30.0
offset_right = 33.0
offset_bottom = 34.0
texture_normal = ExtResource("6_mu4di")
texture_pressed = ExtResource("7_obphs")
texture_hover = ExtResource("8_osqhh")

[node name="Pink" parent="OnTheGround/SequencePuzzle/Objects" instance=ExtResource("4_u8jam")]
visible = false
modulate = Color(0.89, 0.2937, 0.804817, 1)
position = Vector2(80, -8)
audio_stream = ExtResource("6_vfsii")

[node name="Yellow" parent="OnTheGround/SequencePuzzle/Objects" instance=ExtResource("4_u8jam")]
modulate = Color(0.89, 0.804817, 0.2937, 1)
position = Vector2(29, -269)
audio_stream = ExtResource("7_c27dh")

[node name="TextureButton" type="TextureButton" parent="OnTheGround/SequencePuzzle/Objects/Yellow"]
offset_left = -32.0
offset_top = -29.0
offset_right = 32.0
offset_bottom = 35.0
texture_normal = ExtResource("6_mu4di")
texture_pressed = ExtResource("7_obphs")
texture_hover = ExtResource("8_osqhh")

[node name="Green" parent="OnTheGround/SequencePuzzle/Objects" instance=ExtResource("4_u8jam")]
modulate = Color(0.188235, 0.717647, 0, 1)
position = Vector2(252, -290)
audio_stream = ExtResource("8_36xq4")

[node name="TextureButton" type="TextureButton" parent="OnTheGround/SequencePuzzle/Objects/Green"]
offset_left = -31.0
offset_top = -26.0
offset_right = 33.0
offset_bottom = 38.0
texture_normal = ExtResource("6_mu4di")
texture_pressed = ExtResource("7_obphs")
texture_hover = ExtResource("8_osqhh")

[node name="Purple" parent="OnTheGround/SequencePuzzle/Objects" instance=ExtResource("4_u8jam")]
visible = false
modulate = Color(0.464066, 0.2937, 0.89, 1)
position = Vector2(320, -32)
audio_stream = ExtResource("9_dch67")

[node name="Red" parent="OnTheGround/SequencePuzzle/Objects" instance=ExtResource("4_u8jam")]
visible = false
modulate = Color(0.89, 0.2937, 0.2937, 1)
position = Vector2(421, -27)
audio_stream = ExtResource("10_c28ma")

[node name="Signs" type="Node2D" parent="OnTheGround/SequencePuzzle"]
y_sort_enabled = true

[node name="HintSign1" parent="OnTheGround/SequencePuzzle/Signs" instance=ExtResource("11_hqbde")]
position = Vector2(403, 460)

[node name="HintSign2" parent="OnTheGround/SequencePuzzle/Signs" instance=ExtResource("11_hqbde")]
position = Vector2(571, 460)
sprite_frames = ExtResource("12_da3b5")

[node name="Steps" type="Node2D" parent="OnTheGround/SequencePuzzle"]

[node name="SequencePuzzleStep1" type="Node2D" parent="OnTheGround/SequencePuzzle/Steps" node_paths=PackedStringArray("sequence", "hint_sign")]
script = ExtResource("13_qq8lk")
sequence = [NodePath("../../Objects/Yellow"), NodePath("../../Objects/Green"), NodePath("../../Objects/Blue")]
hint_sign = NodePath("../../Signs/HintSign1")

[node name="SequencePuzzleStep2" type="Node2D" parent="OnTheGround/SequencePuzzle/Steps" node_paths=PackedStringArray("sequence", "hint_sign")]
script = ExtResource("13_qq8lk")
sequence = [NodePath("../../Objects/Blue"), NodePath("../../Objects/Green"), NodePath("../../Objects/Yellow"), NodePath("../../Objects/Green")]
hint_sign = NodePath("../../Signs/HintSign2")

[node name="CollectibleItem" parent="OnTheGround" instance=ExtResource("14_gi6a4")]
position = Vector2(861, 282)
revealed = false
next_scene = "uid://cqjdjcwwfg0xi"
item = SubResource("Resource_u8qfb")
collected_dialogue = ExtResource("23_3yqqj")
dialogue_title = &"well_done"

[node name="Sign" parent="OnTheGround" instance=ExtResource("17_ahdq8")]
visible = false
position = Vector2(184, 434)
direction = 1
text = "First melody: yellow, green, blue."

[node name="ScreenOverlay" type="CanvasLayer" parent="."]

[node name="HUD" parent="." instance=ExtResource("18_8nqux")]

[node name="Camera2D" type="Camera2D" parent="."]
anchor_mode = 0
zoom = Vector2(1.333, 1.333)
position_smoothing_enabled = true

[node name="Cinematic" type="Node2D" parent="."]
script = ExtResource("19_mbj8h")
dialogue = ExtResource("23_3yqqj")
metadata/_custom_type_script = "uid://x1mxt6bmei2o"

[node name="Sprite2D" type="Sprite2D" parent="."]
position = Vector2(801, 28)
texture = ExtResource("23_ubfk3")

[node name="Sprite2D" type="Sprite2D" parent="Sprite2D"]
position = Vector2(-11, 428)
texture = ExtResource("24_3yqqj")

[node name="Sprite2D" type="Sprite2D" parent="Sprite2D/Sprite2D"]
position = Vector2(65, 14)
texture = ExtResource("25_b77x0")

[connection signal="solved" from="OnTheGround/SequencePuzzle" to="OnTheGround/CollectibleItem" method="reveal"]
